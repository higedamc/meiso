# Issue #21: ??????????????

## ?????????

### 1. ????????

???`Todo`???????2???????????????

```dart
class Todo {
  DateTime? date;           // ??????????Today/Tomorrow/Someday?
  String? customListId;     // ????????
}
```

**????**
- `date`?`customListId`???????????????
- ????????????????
- ??????????????

### 2. ??????????

`TodosProvider`?`Map<DateTime?, List<Todo>>`??Todo?????????

```dart
final todosProvider = StateNotifierProvider<TodosNotifier, AsyncValue<Map<DateTime?, List<Todo>>>>(...)
```

**????**
- `date=null`????Someday?Todo?????????Todo???
- ????????Todo????????Todo??????????
- ?????????????????

??`ListDetailScreen`????
```dart
// ????Todo?????????????Todo???
final listTodos = <Todo>[];
for (final dateGroup in allTodos.values) {
  for (final todo in dateGroup) {
    if (todo.customListId == customList.id) {
      listTodos.add(todo);
    }
  }
}
```

### 3. ???????

???`reorderTodo`?????????????????????????

```dart
Future<void> reorderTodo(DateTime? date, int oldIndex, int newIndex) async {
  // date?????????
}
```

**????**
- ?????????????????????????
- `ListDetailScreen`?????????????TODO: ??????????????????????

## ????

### 1. ??????????????????????

**???????**
- ????????: `date`?????????`customListId = null`
  - Today: `date = ?????`
  - Tomorrow: `date = ?????`  
  - Someday: `date = null && customListId = null`
- ???????: `customListId`?????????`date = null`

**???**
- `Todo`??????????????????
- `addTodo`/`moveTodo`???????

### 2. ??????????????????

???`Map<DateTime?, List<Todo>>`?????????????????????
- ????????Todo???`date=null`??????
- `customListId`????????????

**???**
- Nostr????????????????????
- ?????????????
- `date=null`?????Someday??????????????`customListId`???????

### 3. ?????????????????????

```dart
Future<void> reorderTodoInCustomList(
  String customListId,
  List<Todo> sortedTodos,
  int oldIndex,
  int newIndex,
) async {
  // ???????????????????
}
```

## ????

### Phase 1: ???????
- [ ] `Todo`?????????????????
- [ ] ?????????`belongsToCustomList`, `belongsToDefaultList`?

### Phase 2: Provider????
- [ ] `addTodo`: `customListId`?????????`date`?????`null`???
- [ ] `moveTodo`: ??????????????????????`customListId`????
- [ ] `reorderTodoInCustomList`: ?????????

### Phase 3: UI????
- [ ] `ListDetailScreen`: ?????????????????????
- [ ] `SomedayScreen`: Someday???????????`customListId=null`?Todo???????

### Phase 4: ??????????
- [ ] ???????????????
- [ ] `date`?`customListId`???????????Todo??????

## ???

### ??????????
- ???Todo?????????????????????????????????
- ???????????????????????????????

### Nostr???????
- `createTodoListOnNostr`: ?Todo????????JSON???????
- `syncTodoListFromNostr`: ????Todo?`date`???`customListId`???????????????

## ???????

1. **??????**
   - ???????????????????
   - ????????Todo???????????????????

2. **?????**
   - ?????????????????????????
   - ?????????????????????????

3. **??????**
   - ?????Todo??????????
   - ??????????????????
